<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\..\FrameXML\UI.xsd">
    
    <CheckButton name="IconPopupButtonTemplate" inherits="SimplePopupButtonTemplate" virtual="true">
		<Scripts>
			<OnClick>
				self:GetParent():GetParent():IconPopupButton_OnClick(self, button, down);
			</OnClick>
		</Scripts>
		<NormalTexture name="$parentIcon" nonBlocking="true">
			<Size x="36" y="36"/>
			<Anchors>
				<Anchor point="CENTER" x="0" y="-1"/>
			</Anchors>
		</NormalTexture>
		<HighlightTexture alphaMode="ADD" file="Interface\Buttons\ButtonHilight-Square"/>
		<CheckedTexture alphaMode="ADD" file="Interface\Buttons\CheckButtonHilight"/>
	</CheckButton>

    <Frame name="CreateEditBankAltDialogFrame" resizable="false" clampedToScreen="true" enableMouse="true" movable="true"
	       topLevel="true" frameStrata="HIGH" parent="UIParent" hidden="true"
	       inherits="BasicFrameTemplate" virtual="true">
		<Size x="400" y="475"/>
		<ResizeBounds>
			<minResize x="400" y="475"/>
		</ResizeBounds>
		<Anchors>
			<Anchor point="TOPLEFT">
				<Offset>
					<AbsDimension x="0" y="-104"/>
				</Offset>
			</Anchor>
		</Anchors>

        <Frames>
            <Button parentKey="dragArea" name="$parentDragArea">
				<Size x="200" y="18"/>
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT">
						<Offset x="5" y="-4"/>
					</Anchor>
                    <Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT">
						<Offset x="-15" y="-4"/>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						self:RegisterForDrag("LeftButton")
					</OnLoad>
					<OnMouseDown>
						self.moving = true
						self:GetParent():StartMoving()
					</OnMouseDown>
					<OnMouseUp>
						if self.moving then
							self.moving = nil
							self:GetParent():StopMovingOrSizing()
							LibStub("LibWindow-1.1").SavePosition(self:GetParent())
						end
					</OnMouseUp>
				</Scripts>
                <PushedTextOffset>
                    <AbsDimension x="0" y="0" />
                </PushedTextOffset>
				<NormalFont style="GameFontNormal"/>
				<HighlightFont style="GameFontHighlight"/>
			</Button>

            <Frame parentKey="configCharacterLabel" name="$parentGuildCharacterConfigLabel">
                <Size>
                    <AbsDimension x="170" y="15" />
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parent">
                        <Offset>
                            <AbsDimension x="15" y="-35" />
                        </Offset>
                    </Anchor>
                    <Anchor point="TOPRIGHT" relativeTo="$parent">
                        <Offset>
                            <AbsDimension x="-15" y="-35" />
                        </Offset>
                    </Anchor>
                </Anchors>
                <Layers>
                    <Layer>
                        <FontString parentKey="Text" name="$parentText" font="Fonts\FRIZQT__.TTF" text="PLGuild_BANK_CHARACTERLIST" justifyH="LEFT">
                            <Anchors>
                                <Anchor point="TOPLEFT" />
                                <Anchor point="BOTTOMRIGHT" />
                            </Anchors>
                            <FontHeight>
                                <AbsValue val="10" />
                            </FontHeight>
                            <Color r="1" g="0.8196079" b="0" />
                            <Shadow>
                                <Color r="0" g="0" b="0" />
                                <Offset>
                                    <AbsDimension x="1" y="-1" />
                                </Offset>
                            </Shadow>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>
            <EditBox parentKey="configCharacterEditBox" name="$parentCharacterEditBox" letters="77" historyLines="0" autoFocus="true" inherits="AutoCompleteEditBoxTemplate">
                <Size x="210" y="25"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentGuildCharacterConfigLabel" relativePoint="BOTTOMLEFT">
                        <Offset>
                            <AbsDimension x="5" y="-2" />
                        </Offset>
                    </Anchor>
                </Anchors>
                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture name="$parentLeft" file="Interface\Common\Common-Input-Border">
                            <Size x="8" y="20"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" x="-8" y="0"/>
                            </Anchors>
                            <TexCoords left="0" right="0.0625" top="0" bottom="0.625"/>
                        </Texture>
                        <Texture name="$parentMiddle" file="Interface\Common\Common-Input-Border">
                            <Size x="221" y="20"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeTo="$parentLeft" relativePoint="RIGHT"/>
                            </Anchors>
                            <TexCoords left="0.0625" right="0.9375" top="0" bottom="0.625"/>
                        </Texture>
                        <Texture name="$parentRight" file="Interface\Common\Common-Input-Border">
                            <Size x="8" y="20"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeTo="$parentMiddle" relativePoint="RIGHT"/>
                            </Anchors>
                            <TexCoords left="0.9375" right="1.0" top="0" bottom="0.625"/>
                        </Texture>
                    </Layer>
                </Layers>
                <Scripts>
                    <OnLoad>
                        AutoCompleteEditBox_SetAutoCompleteSource(self, GetAutoCompleteResults, AUTOCOMPLETE_LIST.GUILD_LEADER.include, AUTOCOMPLETE_LIST.GUILD_LEADER.exclude);
                        self.addHighlightedText = true;
                        self.autoCompleteContext = "guildMember";
                    </OnLoad>
                    <OnTabPressed>
                        if ( not AutoCompleteEditBox_OnTabPressed(self) ) then
                            EditBox_HandleTabbing(self, PLGBC_CREATE_BANK_ALT_TAB_LIST);
                        end
                    </OnTabPressed>
                    <OnEditFocusLost>
                        AutoCompleteEditBox_OnEditFocusLost(self);
                        EditBox_ClearHighlight(self)
                    </OnEditFocusLost>
                    <OnEnterPressed>
                        if ( not AutoCompleteEditBox_OnEnterPressed(self) ) then
                            self:GetParent():CanUseCharacter(self);
                        end
                    </OnEnterPressed>
                    <OnEscapePressed>
                        if ( not AutoCompleteEditBox_OnEscapePressed(self) ) then
                            EditBox_ClearFocus(self);
                        end
                    </OnEscapePressed>
                    <OnTextChanged>
                        AutoCompleteEditBox_OnTextChanged(self, userInput);
                        self:GetParent():CanUseCharacter(self);
                    </OnTextChanged>
                </Scripts>
                <FontString inherits="ChatFontNormal"/>
            </EditBox>

            <Frame parentKey="configTabDescription" name="$parentGuildTabDescription">
                <Size>
                    <AbsDimension x="400" y="15" />
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentCharacterEditBox" relativePoint="BOTTOMLEFT">
                        <Offset>
                            <AbsDimension x="-5" y="-2" />
                        </Offset>
                    </Anchor>
                    <Anchor point="TOPRIGHT" relativeTo="$parentCharacterEditBox" relativePoint="BOTTOMRIGHT">
                        <Offset>
                            <AbsDimension x="100" y="-15" />
                        </Offset>
                    </Anchor>
                </Anchors>

                <Layers>
                    <Layer>
                        <FontString parentKey="Text" name="$parentText" font="Fonts\FRIZQT__.TTF" text="PLGuild_BANK_TAB_DESCRIPTION" justifyH="LEFT">
                            <Anchors>
                                <Anchor point="TOPLEFT" />
                                <Anchor point="BOTTOMRIGHT" />
                            </Anchors>
                            <FontHeight>
                                <AbsValue val="10" />
                            </FontHeight>
                            <Color r="1" g="0.8196079" b="0" />
                            <Shadow>
                                <Color r="0" g="0" b="0" />
                                <Offset>
                                    <AbsDimension x="1" y="-1" />
                                </Offset>
                            </Shadow>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>
            <EditBox parentKey="configDescriptionEditBox" name="$parentDescriptionEditBox" letters="77" historyLines="0" autoFocus="false">
                <Size x="210" y="25"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentGuildTabDescription" relativePoint="BOTTOMLEFT">
                        <Offset>
                            <AbsDimension x="5" y="-2" />
                        </Offset>
                    </Anchor>
                </Anchors>
                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture name="$parentLeft" file="Interface\Common\Common-Input-Border">
                            <Size x="8" y="20"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" x="-8" y="0"/>
                            </Anchors>
                            <TexCoords left="0" right="0.0625" top="0" bottom="0.625"/>
                        </Texture>
                        <Texture name="$parentMiddle" file="Interface\Common\Common-Input-Border">
                            <Size x="221" y="20"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeTo="$parentLeft" relativePoint="RIGHT"/>
                            </Anchors>
                            <TexCoords left="0.0625" right="0.9375" top="0" bottom="0.625"/>
                        </Texture>
                        <Texture name="$parentRight" file="Interface\Common\Common-Input-Border">
                            <Size x="8" y="20"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeTo="$parentMiddle" relativePoint="RIGHT"/>
                            </Anchors>
                            <TexCoords left="0.9375" right="1.0" top="0" bottom="0.625"/>
                        </Texture>
                    </Layer>
                </Layers>
                <Scripts>
                    <OnTextChanged>
                        self:GetParent():DescriptionEditBox_OnTextChanged(self);
                    </OnTextChanged>
                    <OnTabPressed>
                        EditBox_HandleTabbing(self, PLGBC_CREATE_BANK_ALT_TAB_LIST);
                    </OnTabPressed>
                    <OnEscapePressed function="EditBox_ClearFocus"/>
                </Scripts>
                <FontString inherits="ChatFontNormal"/>
            </EditBox>

            <Frame parentKey="configIconSelect" name="$parentGuildIconSelect">
                <Size>
                    <AbsDimension x="400" y="15" />
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentDescriptionEditBox" relativePoint="BOTTOMLEFT">
                        <Offset>
                            <AbsDimension x="-5" y="-2" />
                        </Offset>
                    </Anchor>
                    <Anchor point="TOPRIGHT" relativeTo="$parentDescriptionEditBox" relativePoint="BOTTOMRIGHT">
                        <Offset>
                            <AbsDimension x="100" y="-15" />
                        </Offset>
                    </Anchor>
                </Anchors>

                <Layers>
                    <Layer>
                        <FontString parentKey="Text" name="$parentText" font="Fonts\FRIZQT__.TTF" text="PLGuild_BANK_ICONSELECT" justifyH="LEFT">
                            <Anchors>
                                <Anchor point="TOPLEFT" />
                                <Anchor point="BOTTOMRIGHT" />
                            </Anchors>
                            <FontHeight>
                                <AbsValue val="10" />
                            </FontHeight>
                            <Color r="1" g="0.8196079" b="0" />
                            <Shadow>
                                <Color r="0" g="0" b="0" />
                                <Offset>
                                    <AbsDimension x="1" y="-1" />
                                </Offset>
                            </Shadow>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>


            <Frame parentKey="selectIconFrame" name="$parentSelectIconFrame">
                <Size x="340" y="280"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentGuildIconSelect" relativePoint="TOPLEFT" x="0" y="-40"/>
                </Anchors>
                <Backdrop edgeFile="Interface\Tooltips\UI-Tooltip-Border">
                    <EdgeSize>
                        <AbsValue val="16" />
                    </EdgeSize>
                    <BorderColor r=".3" g=".3" b=".3"/>
                </Backdrop>
                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture file="Interface\ChatFrame\ChatFrameBackground">
                            <Anchors>
                                <Anchor point="TOPLEFT">
                                    <Offset>
                                        <AbsDimension x="4" y="-4"/>
                                    </Offset>
                                </Anchor>
                                <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT">
                                    <Offset>
                                        <AbsDimension x="-4" y="4"/>
                                    </Offset>
                                </Anchor>
                            </Anchors>
                            <Gradient>
                                <MinColor r="0.25" g="0.25" b="0.25"/>
                                <MaxColor r="0" g="0" b="0"/>
                            </Gradient>
                        </Texture>
                    </Layer>
                </Layers>

                <Frames>
                    <ScrollFrame parentKey="selectableIcons" name="$parentIconScrollFrame" inherits="ListScrollFrameTemplate">
                        <Size x="340" y="280"/>
                        <Anchors>
                            <Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT" x="0" y="-5"/>
                        </Anchors>
                        <Scripts>
                            <OnVerticalScroll>
                                FauxScrollFrame_OnVerticalScroll(self, offset, self:GetParent():GetParent().iconRowHeight, self:GetParent():GetParent().UpdateIconFrame);
                            </OnVerticalScroll>
                        </Scripts>
                    </ScrollFrame>
                </Frames>
            </Frame>

            <CheckButton parentKey="selectedMacroIcon" name="$parentSelectedIconButton" frameStrata="HIGH" inherits="PopupButtonTemplate" id="0">
				<Anchors>
					<Anchor point="BOTTOMRIGHT" relativeTo="$parentSelectIconFrame" x="-20" y="4" relativePoint="TOPRIGHT"/>
				</Anchors>
				<Scripts>
					<OnClick>
						self:SetChecked(false);
					</OnClick>
				</Scripts>
			</CheckButton>

            <Button parentKey="saveButton" name="$parentEditSave" inherits="UIPanelButtonTemplate" text="SAVE">
                <Size x="124" y="21"/>
                <Anchors>
                    <Anchor point="BOTTOMLEFT" relativeTo="$parent" relativePoint="BOTTOMLEFT">
                        <Offset x="10" y="4"/>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        self:GetParent():OnSaveClick();
                    </OnClick>
                </Scripts>
            </Button>
            <Button name="$parentEditCancel" inherits="UIPanelButtonTemplate" text="CANCEL">
                <Size x="124" y="21"/>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentEditSave" relativePoint="RIGHT">
                        <Offset x="10" y="0"/>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        self:GetParent():OnCancelClick();
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>
    </Frame>
</Ui>